<!-- pages/customer-chat/customer-chat.wxml -->
<view class="chat-page">
  <!-- èŠå¤©å¤´éƒ¨ -->
  <view class="chat-header">
    <view class="header-left">
      <text class="service-avatar">ğŸ‘¨â€ğŸ’¼</text>
      <view class="service-info">
        <text class="service-name">åœ¨çº¿å®¢æœ</text>
        <text class="service-status">åœ¨çº¿</text>
      </view>
    </view>
  </view>

  <!-- èŠå¤©æ¶ˆæ¯åŒºåŸŸ -->
  <scroll-view class="chat-messages" scroll-y scroll-into-view="{{scrollToView}}" scroll-with-animation>
    <!-- æ—¶é—´åˆ†éš” -->
    <view class="time-divider" wx:if="{{messages.length > 0}}">
      <text>ä»Šå¤©</text>
    </view>

    <!-- æ¶ˆæ¯åˆ—è¡¨ -->
    <block wx:for="{{messages}}" wx:key="id">
      <!-- å®¢æœæ¶ˆæ¯ -->
      <view class="message-item service" wx:if="{{item.type === 'service'}}" id="msg-{{index}}">
        <view class="avatar">ğŸ‘¨â€ğŸ’¼</view>
        <view class="message-content">
          <view class="message-bubble">{{item.content}}</view>
          <text class="message-time">{{item.time}}</text>
        </view>
      </view>

      <!-- ç”¨æˆ·æ¶ˆæ¯ -->
      <view class="message-item user" wx:if="{{item.type === 'user'}}" id="msg-{{index}}">
        <view class="message-content">
          <view class="message-bubble">{{item.content}}</view>
          <text class="message-time">{{item.time}}</text>
        </view>
        <view class="avatar">ğŸ˜Š</view>
      </view>
    </block>

    <!-- å¿«æ·å›å¤ -->
    <view class="quick-replies" wx:if="{{showQuickReplies}}">
      <text class="quick-title">å¿«æ·é—®é¢˜</text>
      <view class="quick-list">
        <view class="quick-item" wx:for="{{quickReplies}}" wx:key="index" bindtap="sendQuickReply" data-content="{{item}}">
          {{item}}
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="chat-input-area">
    <input 
      class="chat-input" 
      placeholder="è¯·è¾“å…¥æ‚¨çš„é—®é¢˜..." 
      value="{{inputContent}}"
      bindinput="onInputChange"
      confirm-type="send"
      bindconfirm="sendMessage"
    />
    <button class="send-btn {{inputContent ? 'active' : ''}}" bindtap="sendMessage">å‘é€</button>
  </view>
</view>
